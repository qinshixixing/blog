---
title: js类型转换规则
introduction: js内部类型转化规则总结
---

#### ToString

##### 规则
1. null转换为"null"。
2. undefined转换为"undefined"。
3. true转换为"true",false转换为"false"。
4. 数字的字符串化遵循通用规则，如100转换为"100"。超出安全范围的用指数表示。NaN转换为"NaN",Infinity转换为"Infinity"。
5. 对象处数组、函数外返回内部属性[[Class]]的值。
6. 为数组时将所有单元字符串化之后用","连接起来。
7. 为函数时返回一个表示当前函数源代码的字符串。

##### 使用情况
1. String(...)函数。
2. 对象的toString方法。
3. +运算符在变量或值之间时，如果两边其中一个是字符串，或者是可以通过ToPrimitive操作返回字符串的对象，则+两边都转换为字符串，执行字符串拼接操作。


---
#### ToNumber

##### 规则
1. null转换为0。
2. undefined转换为NaN。
3. true转换为1,false转换为0。
4. 字符串若为数字字符形式则转换为对应数字，若字符串为空字符串""、"\n"或者" "等其他空格组合则被转换为0，若为其他字符则返回NaN。
5. 对象会按照ToPrimitive操作转换为基本类型值，若为数字则为该值，若为非数字在遵循以上规则转换为数字。

##### 使用情况
1. Number(...)函数。
2. +运算符放在变量或值前，如+"100"。
3. +运算符在变量或值之间，null、undefined、布尔值会转化为数字。若对象的ToPrimitive操作返回数字，则对象亦转化为数字。
4. -、*、／运算符在变量或值之间，如"100"-"1"。
5. ~运算符将值转换为32位数字再按位取非，可用~~将一个值截取为32位整数。
6. 执行==比较时，字符串和布尔值会被ToNumber为数字。

注：parseInt(...)函数，与Number(...)不同，从第一个字符开始解析，解析到不是数字字符为止，返回解析过的字符，注意第二个参数为进制。

---
#### ToBoolean

##### 规则
1. null、undefined、+0、-0、NaN、""转换为false。
2. 除上述外等值转换为true。

##### 使用情况
1. Boolean(...)函数。
2. !运算符将值转换为布尔值，并取反，可用!!将值转换为布尔值。
3. ?:运算符中会在判断?前的值时将其ToBoolean。
4. if(...)、for(...;...;...)、while(...)、do...while(...)中都条件判断会将表达式结果ToBoolean。
5. \|\|和&&左边的操作数会被ToBoolean，若为true，\|\|返回第一个操作数的值，&&返回第二个操作数的值，若为false反之。

---
#### ToPrimitive

##### 规则
对对象检查是否有valueOf()方法，若有且返回基本类型值则返回该值，若不是则使用toString()的返回值。如果两个方法都不返回基本类型值，会产生TypeError错误。

##### 使用情况
1. 上述ToString和ToBoolean规则中用到ToPrimitive的情况。
2. 执行==比较时，对象会先被ToPrimitive成基本类型。

---
#### 附：关于==比较

1. 字符串和布尔值会被ToNumber为数字。
2. 对象在与数字、字符串和布尔值比较时会先被ToPrimitive成基本类型。
3. null与undefined相等，它们也与其自身相等。
4. NaN不等于NaN，+0等于-0。
