---
title: 前端性能优化
day: 2018-01-08
time: “23:00:00”
excerpt: 前端性能优化总结
---

#### 一、图片处理
1. 控制单张图片大小（50kb）
2. 合理使用CSS/SVG/ICON Font替代图片
3. 对图片进行按需加载

#### 二、网络请求控制
1. 域名收敛，避免解析过多的域名（5个）
2. 减少HTTP请求，合并文件
3. 文本数据的优化与压缩
4. 使用JSON格式来进行数据交换
5. 合理使用cdn加速
6. 合理控制cookie的作用域和资源所在的域，避免不必要的cookie传输

#### 三、合理处理脚本和样式表
1. 将CSS和JS放到外部文件中引用，CSS放头，JS放尾（ JavaScript 会阻塞页面的解析，而外部样式表会阻塞页面的呈现和 JavaScript 的执行）
2. 最后一个选择越特殊，需要进行匹配的次数越少，不要使用太多的选择器
3. 使用Web Worker来处理复杂的计算

#### 四、尽量减少dom操作，优化渲染
1. 不要把dom读操作和写操作放在一起，进行批量操作dom，读写分开
2. 将渐变或者会动画元素放到单独的绘制层中
3. 如果某个样式是通过重排得到的，那么最好缓存结果
4. 不要一条条地改变样式，通过改变class等一次性改变
5. 尽量使用未挂载的dom来改变元素样式。比如，Document Fragment或者使用cloneNode()方法在克隆的节点上进行操作
6. 需要多步dom操作且中间步骤可以不展示的情况下，可以先设置display: none最后再恢复显示
7. 使用虚拟DOM的脚本库，比如React等
8. 使用window.requestAnimationFrame()、window.requestIdleCallback()来更新页面
9. 避免在scroll或touchmove这类事件的回调中修改样式，对这类高频触发的事件进行节流或消抖，控制执行次数

